

<!DOCTYPE html>
<html class="writer-html5" lang="ja-JP" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Accreditation protocol &mdash; Qiskit 0.19.6 ドキュメント</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme-override.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/style.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/jupyter-sphinx.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/language_data.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="https://unpkg.com/@jupyter-widgets/html-manager@^0.20.0-alpha.0/dist/embed-amd.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="索引" href="../../genindex.html" />
    <link rel="search" title="検索" href="../../search.html" />
    <link rel="next" title="Optimization Tutorials" href="../optimization/index.html" />
    <link rel="prev" title="Repetition Codes" href="6_repetition_code.html" />
    <script>
    (function () {
      'use strict'
      window._analytics = {
        segment_key: 'ffdYLviQze3kzomaINXNk6NwpY9LlXcw',
        coremetrics: false,
        optimizely: false,
        googleAddServices: false,
        fullStory: false,
        autoPageEventSpa: false,
        autoFormEvents: false,
        autoPageView: false
      }

      window.digitalData = {
        page: {
          pageInfo: {
            productTitle: 'IBM Q Experience',
            analytics: {
              category: 'Qiskit.org'
            }
          }
        }
      }

      window._analyticsReady = window._analyticsReady || new Promise((resolve) => {
        const script = document.createElement('script')
        script.async = true
        script.src = 'https://cloud.ibm.com/analytics/build/bluemix-analytics.min.js'
        document.head.appendChild(script)
        script.onload = resolve
        script.onerror = (err) => {
          console.warn('Error loading Bluemix Analytics script:', err)
          resolve()
        }
      })

      window._analyticsReady.then(() => {
        if (!window.bluemixAnalytics || !window.digitalData) { return }

        const category = window.digitalData.page.pageInfo.analytics.category
        const productTitle = window.digitalData.page.pageInfo.productTitle
        const routeName = 'api-documentation'

        window.bluemixAnalytics.pageEvent(category, routeName, {
          navigationType: 'pushState',
          productTitle: productTitle,
          title: document.title
        })
      })
    }());
    </script>
     

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #212121" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Qiskit
          

          
            
            <img src="../../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../install.html">Qiskitのインストール</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Qiskit 入門</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../the_elements.html">Qiskit の要素</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../development_strategy.html">開発ストラテジー</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../contributing_to_qiskit.html">Qiskit に貢献する</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes.html">リリースノート</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">よくある質問</a></li>
</ul>
<p class="caption"><span class="caption-text">チュートリアル</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../circuits/index.html">回路</a></li>
<li class="toctree-l1"><a class="reference internal" href="../circuits_advanced/index.html">高度な回路</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pulse/index.html">パルス</a></li>
<li class="toctree-l1"><a class="reference internal" href="../simulators/index.html">ハイパフォーマンス・シミュレーター</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">量子システムエラー解析</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="1_hamiltonian_and_gate_characterization.html">ハミルトニアンとゲートの特性評価</a></li>
<li class="toctree-l2"><a class="reference internal" href="2_relaxation_and_decoherence.html"><em>Relaxation and Decoherence</em></a></li>
<li class="toctree-l2"><a class="reference internal" href="3_measurement_error_mitigation.html">Measurement Error Mitigation</a></li>
<li class="toctree-l2"><a class="reference internal" href="4_randomized_benchmarking.html">Randomized Benchmarking</a></li>
<li class="toctree-l2"><a class="reference internal" href="5_quantum_volume.html">Quantum Volume</a></li>
<li class="toctree-l2"><a class="reference internal" href="6_repetition_code.html">Repetition Codes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Accreditation protocol</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#Input-to-the-protocol">Input to the protocol</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Generating-accreditation-circuits">Generating accreditation circuits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Simulate-the-ideal-circuits">Simulate the ideal circuits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#Defining-the-noise-model">Defining the noise model</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../optimization/index.html">数理最適化</a></li>
<li class="toctree-l1"><a class="reference internal" href="../finance/index.html">金融</a></li>
<li class="toctree-l1"><a class="reference internal" href="../chemistry/index.html">化学</a></li>
</ul>
<p class="caption"><span class="caption-text">ライブラリ</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/circuit_library.html">サーキット・ライブラリ</a></li>
</ul>
<p class="caption"><span class="caption-text">API リファレンス</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/terra.html">Qiskit Terra</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/aer.html">Qiskit Aer</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/ignis.html">Qiskit Ignis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/aqua.html">Qiskit Aqua</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../apidoc/ibmq-provider.html">Qiskit IBM Quantum プロバイダー</a></li>
</ul>
<p class="caption"><span class="caption-text">トラブルシューティング</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://quantum-computing.ibm.com/docs/cloud/errors">Quantum Experience API エラーコード一覧</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Qiskit</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Quantum System Error Analysis Tutorials</a> &raquo;</li>
        
      <li>Accreditation protocol</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/tutorials/noise/7_accreditation.ipynb" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS for nbsphinx extension */

/* remove conflicting styling from Sphinx themes */
div.nbinput.container,
div.nbinput.container div.prompt,
div.nbinput.container div.input_area,
div.nbinput.container div[class*=highlight],
div.nbinput.container div[class*=highlight] pre,
div.nboutput.container,
div.nboutput.container div.prompt,
div.nboutput.container div.output_area,
div.nboutput.container div[class*=highlight],
div.nboutput.container div[class*=highlight] pre {
    background: none;
    border: none;
    padding: 0 0;
    margin: 0;
    box-shadow: none;
}

/* avoid gaps between output lines */
div.nboutput.container div[class*=highlight] pre {
    line-height: normal;
}

/* input/output containers */
div.nbinput.container,
div.nboutput.container {
    display: -webkit-flex;
    display: flex;
    align-items: flex-start;
    margin: 0;
    width: 100%;
}
@media (max-width: 540px) {
    div.nbinput.container,
    div.nboutput.container {
        flex-direction: column;
    }
}

/* input container */
div.nbinput.container {
    padding-top: 5px;
}

/* last container */
div.nblast.container {
    padding-bottom: 5px;
}

/* input prompt */
div.nbinput.container div.prompt pre {
    color: #307FC1;
}

/* output prompt */
div.nboutput.container div.prompt pre {
    color: #BF5B3D;
}

/* all prompts */
div.nbinput.container div.prompt,
div.nboutput.container div.prompt {
    width: 4.5ex;
    padding-top: 5px;
    position: relative;
    user-select: none;
}

div.nbinput.container div.prompt > div,
div.nboutput.container div.prompt > div {
    position: absolute;
    right: 0;
    margin-right: 0.3ex;
}

@media (max-width: 540px) {
    div.nbinput.container div.prompt,
    div.nboutput.container div.prompt {
        width: unset;
        text-align: left;
        padding: 0.4em;
    }
    div.nboutput.container div.prompt.empty {
        padding: 0;
    }

    div.nbinput.container div.prompt > div,
    div.nboutput.container div.prompt > div {
        position: unset;
    }
}

/* disable scrollbars on prompts */
div.nbinput.container div.prompt pre,
div.nboutput.container div.prompt pre {
    overflow: hidden;
}

/* input/output area */
div.nbinput.container div.input_area,
div.nboutput.container div.output_area {
    -webkit-flex: 1;
    flex: 1;
    overflow: auto;
}
@media (max-width: 540px) {
    div.nbinput.container div.input_area,
    div.nboutput.container div.output_area {
        width: 100%;
    }
}

/* input area */
div.nbinput.container div.input_area {
    border: 1px solid #e0e0e0;
    border-radius: 2px;
    background: #f5f5f5;
}

/* override MathJax center alignment in output cells */
div.nboutput.container div[class*=MathJax] {
    text-align: left !important;
}

/* override sphinx.ext.imgmath center alignment in output cells */
div.nboutput.container div.math p {
    text-align: left;
}

/* standard error */
div.nboutput.container div.output_area.stderr {
    background: #fdd;
}

/* ANSI colors */
.ansi-black-fg { color: #3E424D; }
.ansi-black-bg { background-color: #3E424D; }
.ansi-black-intense-fg { color: #282C36; }
.ansi-black-intense-bg { background-color: #282C36; }
.ansi-red-fg { color: #E75C58; }
.ansi-red-bg { background-color: #E75C58; }
.ansi-red-intense-fg { color: #B22B31; }
.ansi-red-intense-bg { background-color: #B22B31; }
.ansi-green-fg { color: #00A250; }
.ansi-green-bg { background-color: #00A250; }
.ansi-green-intense-fg { color: #007427; }
.ansi-green-intense-bg { background-color: #007427; }
.ansi-yellow-fg { color: #DDB62B; }
.ansi-yellow-bg { background-color: #DDB62B; }
.ansi-yellow-intense-fg { color: #B27D12; }
.ansi-yellow-intense-bg { background-color: #B27D12; }
.ansi-blue-fg { color: #208FFB; }
.ansi-blue-bg { background-color: #208FFB; }
.ansi-blue-intense-fg { color: #0065CA; }
.ansi-blue-intense-bg { background-color: #0065CA; }
.ansi-magenta-fg { color: #D160C4; }
.ansi-magenta-bg { background-color: #D160C4; }
.ansi-magenta-intense-fg { color: #A03196; }
.ansi-magenta-intense-bg { background-color: #A03196; }
.ansi-cyan-fg { color: #60C6C8; }
.ansi-cyan-bg { background-color: #60C6C8; }
.ansi-cyan-intense-fg { color: #258F8F; }
.ansi-cyan-intense-bg { background-color: #258F8F; }
.ansi-white-fg { color: #C5C1B4; }
.ansi-white-bg { background-color: #C5C1B4; }
.ansi-white-intense-fg { color: #A1A6B2; }
.ansi-white-intense-bg { background-color: #A1A6B2; }

.ansi-default-inverse-fg { color: #FFFFFF; }
.ansi-default-inverse-bg { background-color: #000000; }

.ansi-bold { font-weight: bold; }
.ansi-underline { text-decoration: underline; }


div.nbinput.container div.input_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight] > pre,
div.nboutput.container div.output_area div[class*=highlight].math,
div.nboutput.container div.output_area.rendered_html,
div.nboutput.container div.output_area > div.output_javascript,
div.nboutput.container div.output_area:not(.rendered_html) > img{
    padding: 5px;
}

/* fix copybtn overflow problem in chromium (needed for 'sphinx_copybutton') */
div.nbinput.container div.input_area > div[class^='highlight'],
div.nboutput.container div.output_area > div[class^='highlight']{
    overflow-y: hidden;
}

/* hide copybtn icon on prompts (needed for 'sphinx_copybutton') */
.prompt a.copybtn {
    display: none;
}

/* Some additional styling taken form the Jupyter notebook CSS */
div.rendered_html table {
  border: none;
  border-collapse: collapse;
  border-spacing: 0;
  color: black;
  font-size: 12px;
  table-layout: fixed;
}
div.rendered_html thead {
  border-bottom: 1px solid black;
  vertical-align: bottom;
}
div.rendered_html tr,
div.rendered_html th,
div.rendered_html td {
  text-align: right;
  vertical-align: middle;
  padding: 0.5em 0.5em;
  line-height: normal;
  white-space: normal;
  max-width: none;
  border: none;
}
div.rendered_html th {
  font-weight: bold;
}
div.rendered_html tbody tr:nth-child(odd) {
  background: #f5f5f5;
}
div.rendered_html tbody tr:hover {
  background: rgba(66, 165, 245, 0.2);
}

/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>This page was generated from <a class="reference external" href="https://github.com/Qiskit/qiskit-tutorials/blob/master/tutorials/noise/7_accreditation.ipynb">tutorials/noise/7_accreditation.ipynb</a>.</p>
</div>
<div class="section" id="Accreditation-protocol">
<h1>Accreditation protocol<a class="headerlink" href="#Accreditation-protocol" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>Accreditation Protocol (AP) is a protocol devised to characterize the reliability of noisy quantum devices.</p>
<p>Given a noisy quantum device implementing a 「target」 quantum circuit, AP certifies an upper-bound on the variation distance between the probability distribution of the outputs returned by the device and the ideal probability distribution. This method is based on Ferracin et al, 「Accrediting outputs of noisy intermediate-scale quantum devices」, <a class="reference external" href="https://arxiv.org/abs/1811.09709">https://arxiv.org/abs/1811.09709</a>.</p>
<p>This notebook gives an example for how to use the ignis.characterization.accreditation module. This particular example shows how to accredit the outputs of a 4-qubit quantum circuit of depth 5. All the circuits are run using the noisy Aer simulator.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[1]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1">#Import general libraries (needed for functions)</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">random</span>
<span class="kn">import</span> <span class="nn">qiskit</span>

<span class="c1">#Import Qiskit classes</span>
<span class="kn">from</span> <span class="nn">qiskit</span> <span class="kn">import</span> <span class="n">QuantumCircuit</span><span class="p">,</span> <span class="n">QuantumRegister</span><span class="p">,</span> <span class="n">ClassicalRegister</span><span class="p">,</span> <span class="n">Aer</span><span class="p">,</span> <span class="n">execute</span>
<span class="kn">from</span> <span class="nn">qiskit.providers.aer.noise</span> <span class="kn">import</span> <span class="n">NoiseModel</span>
<span class="kn">from</span> <span class="nn">qiskit.providers.aer.noise.errors.standard_errors</span> <span class="kn">import</span> <span class="n">depolarizing_error</span>

<span class="c1">#Import the accreditation functions.</span>
<span class="kn">from</span> <span class="nn">qiskit.ignis.verification.accreditation</span> <span class="kn">import</span> <span class="n">AccreditationFitter</span><span class="p">,</span><span class="n">AccreditationCircuits</span>

</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area stderr docutils container">
<div class="highlight"><pre>
/opt/miniconda3/lib/python3.7/site-packages/qiskit_aqua-0.7.0-py3.7.egg/qiskit/aqua/operators/primitive_ops/pauli_op.py:25: DeprecationWarning: The module qiskit.extensions.standard is deprecated as of 0.14.0 and will be removed no earlier than 3 months after the release. You should import the standard gates from qiskit.circuit.library.standard_gates instead.
  from qiskit.extensions.standard import RZGate, RYGate, RXGate, XGate, YGate, ZGate, IGate
</pre></div></div>
</div>
<div class="section" id="Input-to-the-protocol">
<h2>Input to the protocol<a class="headerlink" href="#Input-to-the-protocol" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>AP can accredit the outputs of a <strong>target circuit</strong> that 1) Takes as input <span class="math notranslate nohighlight">\(n\)</span> qubits in the state <span class="math notranslate nohighlight">\(|{0}&gt;\)</span> 2) Ends with single-qubit measurements in the Pauli-<span class="math notranslate nohighlight">\(Z\)</span> basis 3) Is made of <span class="math notranslate nohighlight">\(m\)</span> 「bands」, each band containing a round of single-qubit gates and a round of controlled-<span class="math notranslate nohighlight">\(Z\)</span> gates. The accreditation is made by employing <strong>trap circuits</strong>, circuits that can be efficiently simulated on a classical computer and that whose outputs are used to witness the correct
functionality of the device.</p>
<p>Let’s now draw a target quantum circuit! We start with a simple circuit to generate and measure 4-qubits GHZ states.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Create a Quantum Register with n_qb qubits.</span>
<span class="n">q_reg</span> <span class="o">=</span> <span class="n">QuantumRegister</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;q&#39;</span><span class="p">)</span>
<span class="c1"># Create a Classical Register with n_qb bits.</span>
<span class="n">c_reg</span> <span class="o">=</span> <span class="n">ClassicalRegister</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;s&#39;</span><span class="p">)</span>
<span class="c1"># Create a Quantum Circuit acting on the q register</span>
<span class="n">target_circuit</span> <span class="o">=</span> <span class="n">QuantumCircuit</span><span class="p">(</span><span class="n">q_reg</span><span class="p">,</span> <span class="n">c_reg</span><span class="p">)</span>

<span class="n">target_circuit</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">cz</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">target_circuit</span><span class="o">.</span><span class="n">h</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

<span class="n">target_circuit</span><span class="o">.</span><span class="n">measure</span><span class="p">(</span><span class="n">q_reg</span><span class="p">,</span> <span class="n">c_reg</span><span class="p">)</span>

<span class="n">target_circuit</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[2]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_noise_7_accreditation_5_0.png" src="../../_images/tutorials_noise_7_accreditation_5_0.png" />
</div>
</div>
</div>
<div class="section" id="Generating-accreditation-circuits">
<h2>Generating accreditation circuits<a class="headerlink" href="#Generating-accreditation-circuits" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The function <span class="math notranslate nohighlight">\(accreditation\_circuits\)</span> generates all the circuits required by AP, target and traps. It automatically appends random Pauli gates to the circuits (if the implementation is noisy, these random Pauli gates reduce the noise to Pauli errors ! )</p>
<p>It also returns the list <span class="math notranslate nohighlight">\(postp\_list\)</span> of strings required to post-process the outputs, as well as the number <span class="math notranslate nohighlight">\(v\_zero\)</span> indicating the circuit implementing the target.</p>
<p>This is the target circuit with randomly chosen Pauli gates:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">accsys</span> <span class="o">=</span> <span class="n">AccreditationCircuits</span><span class="p">(</span><span class="n">target_circuit</span><span class="p">)</span>

<span class="n">v</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">circ_list</span><span class="p">,</span> <span class="n">postp_list</span><span class="p">,</span> <span class="n">v_zero</span> <span class="o">=</span> <span class="n">accsys</span><span class="o">.</span><span class="n">generate_circuits</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="n">circ_list</span><span class="p">[(</span><span class="n">v_zero</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[3]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_noise_7_accreditation_8_0.png" src="../../_images/tutorials_noise_7_accreditation_8_0.png" />
</div>
</div>
<p>This is how a trap looks like:</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">circ_list</span><span class="p">[(</span><span class="n">v_zero</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[4]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_noise_7_accreditation_10_0.png" src="../../_images/tutorials_noise_7_accreditation_10_0.png" />
</div>
</div>
<p>One can use the optional twoqubitgate arguement to switch use cx instead of cz gates and can arbitrarily change the coupling map, in order to compile to the desired device topology (which in this case might lead to more layers than expected).</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">accsys</span><span class="o">.</span><span class="n">target_circuit</span><span class="p">(</span><span class="n">target_circuit</span><span class="p">,</span> <span class="n">two_qubit_gate</span><span class="o">=</span><span class="s1">&#39;cx&#39;</span><span class="p">,</span> <span class="n">coupling_map</span><span class="o">=</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span> <span class="p">)</span>

<span class="n">v</span> <span class="o">=</span> <span class="mi">10</span>

<span class="n">circ_list</span><span class="p">,</span> <span class="n">postp_list</span><span class="p">,</span> <span class="n">v_zero</span> <span class="o">=</span> <span class="n">accsys</span><span class="o">.</span><span class="n">generate_circuits</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
<span class="n">circ_list</span><span class="p">[(</span><span class="n">v_zero</span><span class="p">)</span><span class="o">%</span><span class="p">(</span><span class="n">v</span><span class="o">+</span><span class="mi">1</span><span class="p">)]</span><span class="o">.</span><span class="n">draw</span><span class="p">(</span><span class="n">output</span> <span class="o">=</span> <span class="s1">&#39;mpl&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[5]:
</pre></div>
</div>
<div class="output_area docutils container">
<img alt="../../_images/tutorials_noise_7_accreditation_12_0.png" src="../../_images/tutorials_noise_7_accreditation_12_0.png" />
</div>
</div>
</div>
<div class="section" id="Simulate-the-ideal-circuits">
<h2>Simulate the ideal circuits<a class="headerlink" href="#Simulate-the-ideal-circuits" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Let’s implement AP.</p>
<p>We use <span class="math notranslate nohighlight">\(accreditation\_circuits\)</span> to generate target and trap circuits. Then, we use the function <span class="math notranslate nohighlight">\(single\_protocol\_run\)</span> to implement all these circuits, keeping the output of the target only if all of the traps return the correct output.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[6]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">simulator</span> <span class="o">=</span> <span class="n">qiskit</span><span class="o">.</span><span class="n">Aer</span><span class="o">.</span><span class="n">get_backend</span><span class="p">(</span><span class="s1">&#39;qasm_simulator&#39;</span><span class="p">)</span>

<span class="n">test_1</span> <span class="o">=</span> <span class="n">AccreditationFitter</span><span class="p">()</span>

<span class="c1"># Create target and trap circuits with random Pauli gates</span>
<span class="n">accsys</span> <span class="o">=</span> <span class="n">AccreditationCircuits</span><span class="p">(</span><span class="n">target_circuit</span><span class="p">)</span>
<span class="n">circuit_list</span><span class="p">,</span> <span class="n">postp_list</span><span class="p">,</span> <span class="n">v_zero</span> <span class="o">=</span> <span class="n">accsys</span><span class="o">.</span><span class="n">generate_circuits</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>


<span class="n">job</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="n">circuit_list</span><span class="p">,</span>
              <span class="n">simulator</span><span class="p">,</span>
              <span class="n">shots</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">result</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
<span class="c1"># Post-process the outputs and see if the protocol accepts</span>
<span class="n">test_1</span><span class="o">.</span><span class="n">single_protocol_run</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">postp_list</span><span class="p">,</span> <span class="n">v_zero</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Outputs of the target: &quot;</span><span class="p">,</span><span class="n">test_1</span><span class="o">.</span><span class="n">outputs</span><span class="p">,</span><span class="s2">&quot; , AP&quot;</span><span class="p">,</span><span class="n">test_1</span><span class="o">.</span><span class="n">flag</span><span class="p">,</span><span class="s2">&quot;these outputs!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Outputs of the target:  [&#39;0100&#39;]  , AP accepted these outputs!
</pre></div></div>
</div>
<p>In the absence of noise, all traps return the expected output, therefore we always accept the output of the target.</p>
<p>To obtain an upper-bound on the variation distance on the outputs of the target circuit, we need to implement AP <span class="math notranslate nohighlight">\(d\)</span> times, each time with <strong>*v*</strong> different trap circuits.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[7]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="c1"># Number of runs</span>
<span class="n">d</span> <span class="o">=</span> <span class="mi">20</span>

<span class="n">test_2</span> <span class="o">=</span> <span class="n">AccreditationFitter</span><span class="p">()</span>

<span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>

    <span class="c1"># Create target and trap circuits with random Pauli gates</span>
    <span class="n">circuit_list</span><span class="p">,</span> <span class="n">postp_list</span><span class="p">,</span> <span class="n">v_zero</span> <span class="o">=</span> <span class="n">accsys</span><span class="o">.</span><span class="n">generate_circuits</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>


    <span class="c1"># Implement all these circuits</span>

    <span class="n">job</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="n">circuit_list</span><span class="p">,</span>
                  <span class="n">simulator</span><span class="p">,</span>
                  <span class="n">shots</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

    <span class="c1"># Post-process the outputs and see if the protocol accepts</span>
    <span class="n">test_2</span><span class="o">.</span><span class="n">single_protocol_run</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">postp_list</span><span class="p">,</span> <span class="n">v_zero</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Protocol run number&quot;</span><span class="p">,</span><span class="n">run</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;, outputs of the target&quot;</span><span class="p">,</span><span class="n">test_2</span><span class="o">.</span><span class="n">flag</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">After&#39;</span><span class="p">,</span><span class="n">test_2</span><span class="o">.</span><span class="n">num_runs</span><span class="p">,</span><span class="s1">&#39;runs, AP has accepted&#39;</span><span class="p">,</span><span class="n">test_2</span><span class="o">.</span><span class="n">N_acc</span><span class="p">,</span><span class="s1">&#39;outputs!&#39;</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">List of accepted outputs:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">test_2</span><span class="o">.</span><span class="n">outputs</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Protocol run number 1 , outputs of the target accepted
Protocol run number 2 , outputs of the target accepted
Protocol run number 3 , outputs of the target accepted
Protocol run number 4 , outputs of the target accepted
Protocol run number 5 , outputs of the target accepted
Protocol run number 6 , outputs of the target accepted
Protocol run number 7 , outputs of the target accepted
Protocol run number 8 , outputs of the target accepted
Protocol run number 9 , outputs of the target accepted
Protocol run number 10 , outputs of the target accepted
Protocol run number 11 , outputs of the target accepted
Protocol run number 12 , outputs of the target accepted
Protocol run number 13 , outputs of the target accepted
Protocol run number 14 , outputs of the target accepted
Protocol run number 15 , outputs of the target accepted
Protocol run number 16 , outputs of the target accepted
Protocol run number 17 , outputs of the target accepted
Protocol run number 18 , outputs of the target accepted
Protocol run number 19 , outputs of the target accepted
Protocol run number 20 , outputs of the target accepted

After 20 runs, AP has accepted 20 outputs!

List of accepted outputs:
 [&#39;0100&#39;, &#39;1011&#39;, &#39;0000&#39;, &#39;0000&#39;, &#39;1011&#39;, &#39;0010&#39;, &#39;0100&#39;, &#39;0000&#39;, &#39;1111&#39;, &#39;1001&#39;, &#39;0010&#39;, &#39;0110&#39;, &#39;1111&#39;, &#39;0110&#39;, &#39;0110&#39;, &#39;1001&#39;, &#39;1101&#39;, &#39;0100&#39;, &#39;1001&#39;, &#39;0010&#39;, &#39;0100&#39;]
</pre></div></div>
</div>
<p>The function <span class="math notranslate nohighlight">\(bound\_variation\_distance\)</span> calculates the upper-bound on the variation distance (VD) using</p>
<div class="math notranslate nohighlight">
\[VD\leq \frac{\varepsilon}{N_{\textrm{acc}}/d-\theta}\textrm{ ,}\]</div>
<p>where <span class="math notranslate nohighlight">\(\theta\in[0,1]\)</span> is a positive number and</p>
<div class="math notranslate nohighlight">
\[\varepsilon= \frac{1.7}{v+1}\]</div>
<p>is the maximum probability of accepting an incorrect state for the target. The function <span class="math notranslate nohighlight">\(bound\_variation\_distance\)</span> also calculates the confidence in the bound as</p>
<div class="math notranslate nohighlight">
\[1-2\textrm{exp}\big(-2\theta d^2\big)\]</div>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[8]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">theta</span> <span class="o">=</span> <span class="mi">5</span><span class="o">/</span><span class="mi">100</span>

<span class="n">test_2</span><span class="o">.</span><span class="n">bound_variation_distance</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;AP accepted&quot;</span><span class="p">,</span><span class="n">test_2</span><span class="o">.</span><span class="n">N_acc</span><span class="p">,</span><span class="s2">&quot;out of&quot;</span><span class="p">,</span><span class="n">test_2</span><span class="o">.</span><span class="n">num_runs</span><span class="p">,</span><span class="s2">&quot;times.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;With confidence&quot;</span><span class="p">,</span><span class="n">test_2</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span><span class="s2">&quot;AP certifies that VD is upper-bounded by&quot;</span><span class="p">,</span><span class="n">test_2</span><span class="o">.</span><span class="n">bound</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
AP accepted 20 out of 20 times.
With confidence 1.0 AP certifies that VD is upper-bounded by 0.16267942583732053
</pre></div></div>
</div>
</div>
<div class="section" id="Defining-the-noise-model">
<h2>Defining the noise model<a class="headerlink" href="#Defining-the-noise-model" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>We define a noise model for the simulator. We add depolarizing error probabilities to the controlled-<span class="math notranslate nohighlight">\(Z\)</span> and single-qubit gates.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[9]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">noise_model</span> <span class="o">=</span> <span class="n">NoiseModel</span><span class="p">()</span>

<span class="n">p1q</span> <span class="o">=</span> <span class="mf">0.003</span>
<span class="n">noise_model</span><span class="o">.</span><span class="n">add_all_qubit_quantum_error</span><span class="p">(</span><span class="n">depolarizing_error</span><span class="p">(</span><span class="n">p1q</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;u1&#39;</span><span class="p">)</span>
<span class="n">noise_model</span><span class="o">.</span><span class="n">add_all_qubit_quantum_error</span><span class="p">(</span><span class="n">depolarizing_error</span><span class="p">(</span><span class="n">p1q</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;u2&#39;</span><span class="p">)</span>
<span class="n">noise_model</span><span class="o">.</span><span class="n">add_all_qubit_quantum_error</span><span class="p">(</span><span class="n">depolarizing_error</span><span class="p">(</span><span class="n">p1q</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="s1">&#39;u3&#39;</span><span class="p">)</span>
<span class="n">p2q</span> <span class="o">=</span> <span class="mf">0.03</span>
<span class="n">noise_model</span><span class="o">.</span><span class="n">add_all_qubit_quantum_error</span><span class="p">(</span><span class="n">depolarizing_error</span><span class="p">(</span><span class="n">p2q</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;cx&#39;</span><span class="p">)</span>

<span class="n">basis_gates</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;u1&#39;</span><span class="p">,</span><span class="s1">&#39;u2&#39;</span><span class="p">,</span><span class="s1">&#39;u3&#39;</span><span class="p">,</span><span class="s1">&#39;cx&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>We then implement noisy circuits and pass their outputs to <span class="math notranslate nohighlight">\(single\_protocol\_run\)</span>.</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[10]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">test_3</span> <span class="o">=</span> <span class="n">AccreditationFitter</span><span class="p">()</span>

<span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>

    <span class="c1"># Create target and trap circuits with random Pauli gates</span>
    <span class="n">circuit_list</span><span class="p">,</span> <span class="n">postp_list</span><span class="p">,</span> <span class="n">v_zero</span> <span class="o">=</span> <span class="n">accsys</span><span class="o">.</span><span class="n">generate_circuits</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
    <span class="n">job</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="n">circuit_list</span><span class="p">,</span>
                  <span class="n">simulator</span><span class="p">,</span>
                  <span class="n">noise_model</span><span class="o">=</span><span class="n">noise_model</span><span class="p">,</span>
                  <span class="n">basis_gates</span><span class="o">=</span><span class="n">basis_gates</span><span class="p">,</span>
                  <span class="n">shots</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                  <span class="n">backend_options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;max_parallel_experiments&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>
    <span class="c1"># Post-process the outputs and see if the protocol accepts</span>
    <span class="n">test_3</span><span class="o">.</span><span class="n">single_protocol_run</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">postp_list</span><span class="p">,</span> <span class="n">v_zero</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Protocol run number&quot;</span><span class="p">,</span><span class="n">run</span><span class="o">+</span><span class="mi">1</span><span class="p">,</span><span class="s2">&quot;, outputs of the target&quot;</span><span class="p">,</span><span class="n">test_3</span><span class="o">.</span><span class="n">flag</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">AP accepted&quot;</span><span class="p">,</span><span class="n">test_3</span><span class="o">.</span><span class="n">N_acc</span><span class="p">,</span><span class="s2">&quot;out of&quot;</span><span class="p">,</span><span class="n">test_3</span><span class="o">.</span><span class="n">num_runs</span><span class="p">,</span><span class="s2">&quot;times.&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">List of accepted outputs:</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">test_3</span><span class="o">.</span><span class="n">outputs</span><span class="p">)</span>

<span class="n">theta</span> <span class="o">=</span> <span class="mi">5</span><span class="o">/</span><span class="mi">100</span>

<span class="n">test_3</span><span class="o">.</span><span class="n">bound_variation_distance</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">With confidence&quot;</span><span class="p">,</span><span class="n">test_3</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span><span class="s2">&quot;AP certifies that VD is upper-bounded by&quot;</span><span class="p">,</span><span class="n">test_3</span><span class="o">.</span><span class="n">bound</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>
Protocol run number 1 , outputs of the target accepted
Protocol run number 2 , outputs of the target accepted
Protocol run number 3 , outputs of the target rejected
Protocol run number 4 , outputs of the target rejected
Protocol run number 5 , outputs of the target rejected
Protocol run number 6 , outputs of the target rejected
Protocol run number 7 , outputs of the target accepted
Protocol run number 8 , outputs of the target rejected
Protocol run number 9 , outputs of the target accepted
Protocol run number 10 , outputs of the target rejected
Protocol run number 11 , outputs of the target accepted
Protocol run number 12 , outputs of the target rejected
Protocol run number 13 , outputs of the target rejected
Protocol run number 14 , outputs of the target rejected
Protocol run number 15 , outputs of the target rejected
Protocol run number 16 , outputs of the target rejected
Protocol run number 17 , outputs of the target rejected
Protocol run number 18 , outputs of the target accepted
Protocol run number 19 , outputs of the target accepted
Protocol run number 20 , outputs of the target rejected

AP accepted 7 out of 20 times.

List of accepted outputs:
 [&#39;0100&#39;, &#39;1011&#39;, &#39;0000&#39;, &#39;0000&#39;, &#39;1011&#39;, &#39;0010&#39;, &#39;0100&#39;, &#39;0000&#39;, &#39;1111&#39;, &#39;1001&#39;, &#39;0010&#39;, &#39;0110&#39;, &#39;1111&#39;, &#39;0110&#39;, &#39;0110&#39;, &#39;1001&#39;, &#39;1101&#39;, &#39;0100&#39;, &#39;1001&#39;, &#39;0010&#39;, &#39;0100&#39;, &#39;1001&#39;, &#39;1011&#39;, &#39;0010&#39;, &#39;0000&#39;, &#39;0100&#39;, &#39;0100&#39;, &#39;0110&#39;]

With confidence 1.0 AP certifies that VD is upper-bounded by 0.5151515151515151
</pre></div></div>
</div>
<p>Changing the number of trap circuits per protocol run changes the upper-bound on the VD, but not the confidence.</p>
<p>What number of trap circuits will ensure the minimal upper-bound for your target circuit?</p>
<div class="nbinput docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span><span class="n">min_traps</span> <span class="o">=</span> <span class="mi">4</span>
<span class="n">max_traps</span> <span class="o">=</span> <span class="mi">10</span>


<span class="k">for</span> <span class="n">num_trap_circs</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">min_traps</span><span class="p">,</span><span class="n">max_traps</span><span class="p">):</span>

    <span class="n">test_4</span> <span class="o">=</span> <span class="n">AccreditationFitter</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">run</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">d</span><span class="p">):</span>

        <span class="c1"># Create target and trap circuits with random Pauli gates</span>
        <span class="n">circuit_list</span><span class="p">,</span> <span class="n">postp_list</span><span class="p">,</span> <span class="n">v_zero</span> <span class="o">=</span> <span class="n">accsys</span><span class="o">.</span><span class="n">generate_circuits</span><span class="p">(</span><span class="n">num_trap_circs</span><span class="p">)</span>

        <span class="n">job</span> <span class="o">=</span> <span class="n">execute</span><span class="p">(</span><span class="n">circuit_list</span><span class="p">,</span>
                      <span class="n">simulator</span><span class="p">,</span>
                      <span class="n">noise_model</span><span class="o">=</span><span class="n">noise_model</span><span class="p">,</span>
                      <span class="n">basis_gates</span><span class="o">=</span><span class="n">basis_gates</span><span class="p">,</span>
                      <span class="n">shots</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                      <span class="n">backend_options</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;max_parallel_experiments&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">})</span>
        <span class="n">result</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">result</span><span class="p">()</span>

        <span class="c1"># Post-process the outputs and see if the protocol accepts</span>
        <span class="n">test_4</span><span class="o">.</span><span class="n">single_protocol_run</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="n">postp_list</span><span class="p">,</span> <span class="n">v_zero</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">With&quot;</span><span class="p">,</span> <span class="n">num_trap_circs</span><span class="p">,</span>
          <span class="s2">&quot;traps, AP accepted&quot;</span><span class="p">,</span> <span class="n">test_4</span><span class="o">.</span><span class="n">N_acc</span><span class="p">,</span>
          <span class="s2">&quot;out of&quot;</span><span class="p">,</span> <span class="n">test_4</span><span class="o">.</span><span class="n">num_runs</span><span class="p">,</span> <span class="s2">&quot;times.&quot;</span><span class="p">)</span>
    <span class="n">test_4</span><span class="o">.</span><span class="n">bound_variation_distance</span><span class="p">(</span><span class="n">theta</span><span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;With confidence&quot;</span><span class="p">,</span> <span class="n">test_4</span><span class="o">.</span><span class="n">confidence</span><span class="p">,</span>
          <span class="s2">&quot;AP with&quot;</span><span class="p">,</span> <span class="n">num_trap_circs</span><span class="p">,</span>
          <span class="s2">&quot;traps certifies that VD is upper-bounded by&quot;</span><span class="p">,</span> <span class="n">test_4</span><span class="o">.</span><span class="n">bound</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nboutput nblast docutils container">
<div class="prompt empty docutils container">
</div>
<div class="output_area docutils container">
<div class="highlight"><pre>

With 4 traps, AP accepted 15 out of 20 times.
With confidence 1.0 AP with 4 traps certifies that VD is upper-bounded by 0.48571428571428577

With 5 traps, AP accepted 11 out of 20 times.
With confidence 1.0 AP with 5 traps certifies that VD is upper-bounded by 0.5666666666666667
</pre></div></div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre>
<span></span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../optimization/index.html" class="btn btn-neutral float-right" title="Optimization Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="6_repetition_code.html" class="btn btn-neutral float-left" title="Repetition Codes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; 著作権 2020, Qiskit Development Team
      <span class="lastupdated">
        最終更新: 2020/08/10
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    <span class="fa fa-book"> 表示</span>
    lang: Japanese
    <span class="fa fa-caret-down"></span>
  </span>
  <div class="rst-other-versions">
    
    <dl>
      <dt>言語</dt>
      
        <dd><a class="version" href="/documentation/tutorials/noise/7_accreditation.html">English</a></dd>
      
        <dd><a class="version" href="/documentation/locale/ja_JP/tutorials/noise/7_accreditation.html">Japanese</a></dd>
      
        <dd><a class="version" href="/documentation/locale/de_DE/tutorials/noise/7_accreditation.html">German</a></dd>
      
        <dd><a class="version" href="/documentation/locale/ko_KR/tutorials/noise/7_accreditation.html">Korean</a></dd>
      
    </dl>
    
  </div>
  <script>
    jQuery('.version').click((evt) => {
      const hash = window.location.hash
      const complete_url = evt.target.href + hash
      window.location = complete_url
      evt.preventDefault()
    })
  </script>
</div>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>